{"ast":null,"code":"var _jsxFileName = \"D:\\\\finalYear\\\\frontend\\\\ecommerce_gui\\\\src\\\\Components\\\\order-summary.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport { Button, Header, Container, Table } from 'semantic-ui-react';\nimport { connect } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport KhaltiCheckout from \"khalti-checkout-web\";\nimport myKey from './khaltiKey';\n\nclass ordersummary extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      error: null,\n      loading: false\n    };\n\n    this.handleFetchOrder = () => {\n      this.setState({\n        loading: true\n      });\n      const token = localStorage.getItem('access');\n      const config = {\n        headers: {\n          'Authorization': 'JWT ' + token\n        }\n      };\n      axios.get(`http://127.0.0.1:8000/api/fetchCart/`, config).then(res => {\n        this.setState({\n          data: res.data,\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: \"You currently do not have an order\",\n          loading: false\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchOrder();\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      loading\n    } = this.state;\n    console.log(data && data.map(order_item => order_item.quantity, 0).toString());\n    let config = {\n      // replace this key with yours\n      \"publicKey\": \"test_public_key_f92b8ed21efe48e1942a23d53d8de4ee\",\n      \"productIdentity\": data && data.map((order_item, i) => i, 0).toString(),\n      \"productName\": data && data.map((order_item, i) => order_item.item, 0).toString(),\n      \"productUrl\": \"http://http://localhost:3000/\",\n      \"eventHandler\": {\n        onSuccess(payload) {\n          // hit merchant api for initiating verfication\n          console.log(payload);\n        },\n\n        // onError handler is optional\n        onError(error) {\n          // handle errors\n          console.log(error);\n        },\n\n        onClose() {\n          console.log('widget is closing');\n        }\n\n      },\n      \"paymentPreference\": [\"KHALTI\", \"EBANKING\", \"MOBILE_BANKING\", \"CONNECT_IPS\", \"SCT\"]\n    };\n    let checkout = new KhaltiCheckout(config);\n    return /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(Header, null, \"Order Summary\"), data && /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      inverted: true,\n      selectable: true\n    }, /*#__PURE__*/React.createElement(Table.Header, null, /*#__PURE__*/React.createElement(Table.Row, null, /*#__PURE__*/React.createElement(Table.HeaderCell, null, \"Order number\"), /*#__PURE__*/React.createElement(Table.HeaderCell, null, \"Name\"), /*#__PURE__*/React.createElement(Table.HeaderCell, null, \"quantity\"), /*#__PURE__*/React.createElement(Table.HeaderCell, null, \"price\"), /*#__PURE__*/React.createElement(Table.HeaderCell, null, \"Gross Total\"))), /*#__PURE__*/React.createElement(Table.Body, null, data.map((order_item, i) => {\n      return /*#__PURE__*/React.createElement(Table.Row, {\n        key: order_item.id\n      }, /*#__PURE__*/React.createElement(Table.Cell, null, i), /*#__PURE__*/React.createElement(Table.Cell, null, order_item.item), /*#__PURE__*/React.createElement(Table.Cell, null, order_item.quantity), /*#__PURE__*/React.createElement(Table.Cell, null, order_item.item_obj.price), /*#__PURE__*/React.createElement(Table.Cell, null, order_item.total));\n    }), /*#__PURE__*/React.createElement(Table.Row, null, /*#__PURE__*/React.createElement(Table.Cell, null), /*#__PURE__*/React.createElement(Table.Cell, null), /*#__PURE__*/React.createElement(Table.Cell, null, \"Total\"), /*#__PURE__*/React.createElement(Table.Cell, null, data.reduce((total, v) => total = total + v.total, 0)), /*#__PURE__*/React.createElement(Table.Cell, {\n      textAlign: \"right\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"black\",\n      onClick: () => checkout.show({\n        amount: 1000\n      })\n    }, \"Checkout\"))))), /*#__PURE__*/React.createElement(\"br\", null));\n  }\n\n}\n\nexport default ordersummary;","map":{"version":3,"sources":["D:/finalYear/frontend/ecommerce_gui/src/Components/order-summary.js"],"names":["React","axios","Button","Header","Container","Table","connect","Link","Redirect","KhaltiCheckout","myKey","ordersummary","Component","state","data","error","loading","handleFetchOrder","setState","token","localStorage","getItem","config","headers","get","then","res","catch","err","componentDidMount","render","console","log","map","order_item","quantity","toString","i","item","onSuccess","payload","onError","onClose","checkout","id","item_obj","price","total","reduce","v","show","amount"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from 'axios';\r\nimport { Button,Header,Container,Table } from 'semantic-ui-react'\r\nimport { connect } from \"react-redux\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport KhaltiCheckout from \"khalti-checkout-web\";\r\nimport myKey from './khaltiKey';\r\n\r\n\r\nclass ordersummary extends React.Component {\r\n\r\n   \r\n\r\n  state = {\r\n    data: null,\r\n    error: null,\r\n    loading: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.handleFetchOrder();\r\n  }\r\n\r\n  handleFetchOrder = () => {\r\n    this.setState({ loading: true });\r\n    const token = localStorage.getItem('access');\r\n    const config = {\r\n      headers: {\r\n        'Authorization': 'JWT ' + token\r\n      }\r\n    };\r\n       axios.get(`http://127.0.0.1:8000/api/fetchCart/` ,config)\r\n      .then(res => {\r\n        this.setState({ data: res.data, loading: false });\r\n      })\r\n      .catch(err => {\r\n       \r\n          this.setState({\r\n            error: \"You currently do not have an order\",\r\n            loading: false\r\n          });\r\n        \r\n        \r\n      });\r\n  };\r\n\r\n\r\n  \r\n  render() {\r\n    const { data, error, loading } = this.state;\r\n    console.log(data && data.map((order_item) =>  order_item.quantity , 0 ).toString());\r\n    \r\n    let config = {\r\n      \r\n      // replace this key with yours\r\n      \"publicKey\": \"test_public_key_f92b8ed21efe48e1942a23d53d8de4ee\",\r\n      \"productIdentity\":data && data.map((order_item,i) =>  i , 0 ).toString(),\r\n      \"productName\":data && data.map((order_item,i) =>  order_item.item , 0 ).toString(),\r\n      \"productUrl\": \"http://http://localhost:3000/\",\r\n      \"eventHandler\": {\r\n          onSuccess (payload) {\r\n              // hit merchant api for initiating verfication\r\n              console.log(payload);\r\n          },\r\n          // onError handler is optional\r\n          onError (error) {\r\n              // handle errors\r\n              console.log(error);\r\n          },\r\n          onClose () {\r\n              console.log('widget is closing');\r\n          }\r\n      },\r\n      \"paymentPreference\": [\"KHALTI\", \"EBANKING\",\"MOBILE_BANKING\", \"CONNECT_IPS\", \"SCT\"],\r\n  };\r\n\r\n  let checkout = new KhaltiCheckout(config);\r\n\r\n    return (\r\n    <Container> \r\n      <br/>\r\n      <Header>Order Summary</Header>\r\n\r\n        {data &&\r\n        <Table celled inverted selectable>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              <Table.HeaderCell>Order number</Table.HeaderCell>\r\n              <Table.HeaderCell>Name</Table.HeaderCell>\r\n              <Table.HeaderCell>quantity</Table.HeaderCell>\r\n              <Table.HeaderCell>price</Table.HeaderCell>\r\n              <Table.HeaderCell>Gross Total</Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Header>\r\n\r\n          <Table.Body>\r\n            {data.map((order_item, i) =>{\r\n              return(\r\n                <Table.Row key= {order_item.id}>\r\n                  <Table.Cell>{i}</Table.Cell>\r\n                  <Table.Cell>{order_item.item}</Table.Cell>\r\n                  <Table.Cell >{order_item.quantity}</Table.Cell>\r\n                  <Table.Cell >{order_item.item_obj.price}</Table.Cell>\r\n                  <Table.Cell >{order_item.total}</Table.Cell>\r\n              </Table.Row>\r\n              )\r\n            })}\r\n            <Table.Row>\r\n                <Table.Cell></Table.Cell>\r\n                <Table.Cell></Table.Cell>\r\n                <Table.Cell>Total</Table.Cell>\r\n                <Table.Cell>{data.reduce((total,v) =>  total = total + v.total , 0 )}</Table.Cell>\r\n                <Table.Cell textAlign='right'>\r\n                  <Button color = 'black' onClick={() => checkout.show({amount: 1000}) }>Checkout</Button>\r\n                </Table.Cell>\r\n              </Table.Row>\r\n          </Table.Body>\r\n        </Table>}\r\n        <br/>\r\n      </Container>\r\n      \r\n      \r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default ordersummary;\r\n"]},"metadata":{},"sourceType":"module"}